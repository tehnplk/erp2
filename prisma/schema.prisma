generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id        Int      @id @default(autoincrement())
  email     String   @unique
  name      String?
  password  String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Department {
  id   Int    @id @default(autoincrement())
  name String
}

model Seller {
  id          Int     @id @default(autoincrement())
  code        String  @unique
  prefix      String?
  name        String
  business    String?
  address     String?
  phone       String?
  fax         String?
  mobile      String?
}

model Product {
  id            Int      @id @default(autoincrement())
  code          String   @unique
  category      String
  name          String
  type          String
  subtype       String
  unit          String
  costPrice     Decimal? @db.Decimal(10, 2)
  sellPrice     Decimal? @db.Decimal(10, 2)
  stockBalance  Int?
  stockValue    Decimal? @db.Decimal(10, 2)
  sellerCode    String?
  image         String?
  flagActivate  Boolean  @default(true)
  adminNote     String?
}

model Survey {
  id              Int      @id @default(autoincrement())
  productCode       String?
  category        String?
  type            String?
  subtype         String?
  productName     String?
  requestedAmount Int?
  unit            String?
  pricePerUnit    Decimal @default(0) @db.Decimal(10, 2)
  requestingDept  String?
  approvedQuota   Int?
}

model Category {
  id       Int    @id @default(autoincrement())
  category String
  type     String
  subtype  String?
}

model PurchasePlan {
  id                      Int      @id @default(autoincrement())
  productCode             String?
  category                String?
  productName             String?
  productType             String?
  productSubtype          String?
  unit                    String?
  pricePerUnit            Decimal @default(0) @db.Decimal(10, 2)
  budgetYear              String?
  planId                  Int?
  inPlan                  String?
  carriedForwardQuantity  Int?
  carriedForwardValue     Decimal  @default(0) @db.Decimal(10, 2)
  requiredQuantityForYear Int?
  totalRequiredValue      Decimal  @default(0) @db.Decimal(10, 2)
  additionalPurchaseQty   Int?
  additionalPurchaseValue Decimal  @default(0) @db.Decimal(10, 2)
  purchasingDepartment    String?
}

model PurchaseApproval {
  id                Int      @id @default(autoincrement())
  approvalId        String?
  department        String?
  recordNumber      String?
  requestDate       String?
  productName       String?
  productCode       String?
  category          String?
  productType       String?
  productSubtype    String?
  requestedQuantity Int?
  unit              String?
  pricePerUnit      Decimal @default(0) @db.Decimal(10, 2)
  totalValue        Decimal @default(0) @db.Decimal(10, 2)
  overPlanCase      String?
  requester         String?
  approver          String?
}

model Warehouse {
  id                    Int      @id @default(autoincrement())
  stockId               String?
  transactionType       String?
  transactionDate       String?
  category              String?
  productType           String?
  productSubtype        String?
  productCode           String?
  productName           String?
  productImage          String?
  unit                  String?
  productLot            String?
  productPrice          Decimal? @default(0) @db.Decimal(10, 2)
  receivedFromCompany   String?
  receiptBillNumber     String?
  requestingDepartment  String?
  requisitionNumber     String?
  quotaAmount           Int?
  carriedForwardQty     Int?
  carriedForwardValue   Decimal  @default(0) @db.Decimal(10, 2)
  transactionPrice      Decimal  @default(0) @db.Decimal(10, 2)
  transactionQuantity   Int?
  transactionValue      Decimal  @default(0) @db.Decimal(10, 2)
  remainingQuantity     Int?
  remainingValue        Decimal  @default(0) @db.Decimal(10, 2)
  inventoryStatus       String?
}

model MeetingRoom {
  id          Int      @id @default(autoincrement()) // รหัสห้องประชุม (Primary Key, เพิ่มอัตโนมัติ)
  name        String // ชื่อห้องประชุม
  location    String? // สถานที่ตั้งห้องประชุม (ไม่บังคับ)
  capacity    Int? // ความจุของห้องประชุม (จำนวนคน, ไม่บังคับ)
  facilities  String? // สิ่งอำนวยความสะดวกในห้อง (ไม่บังคับ)
  isActive    Boolean  @default(true) // สถานะการใช้งานของห้อง (ค่าเริ่มต้น: เปิดใช้งาน)
  createdAt   DateTime @default(now()) // วันที่สร้างข้อมูล
  updatedAt   DateTime @updatedAt // วันที่อัปเดตข้อมูลล่าสุด
}

model MeetingRoomBooking {
  id              Int      @id @default(autoincrement()) // รหัสการจอง (Primary Key, เพิ่มอัตโนมัติ)
  roomId          Int // รหัสห้องประชุมที่จอง (Foreign Key)
  department      String? // แผนกที่จอง (ไม่บังคับ)
  requester       String // ชื่อผู้จอง
  requesterEmail  String? // อีเมลผู้จอง (ไม่บังคับ)
  requesterPhone  String? // เบอร์โทรศัพท์ผู้จอง (ไม่บังคับ)
  bookingDate     String // วันที่จอง
  startTime       String // เวลาเริ่มต้นการใช้ห้อง
  endTime         String // เวลาสิ้นสุดการใช้ห้อง
  purpose         String? // วัตถุประสงค์การจอง (ไม่บังคับ)
  attendees       Int? // จำนวนผู้เข้าร่วม (ไม่บังคับ)
  status          String   @default("pending") // สถานะการจอง (รออนุมัติ, อนุมัติ, ปฏิเสธ, ยกเลิก, ค่าเริ่มต้น: รออนุมัติ)
  approver        String? // ชื่อผู้อนุมัติ (ไม่บังคับ)
  approvedAt      DateTime? // วันที่อนุมัติ (ไม่บังคับ)
  rejectionReason String? // เหตุผลที่ปฏิเสธ (ไม่บังคับ)
  specialRequest  String? // คำขอพิเศษ (ไม่บังคับ)
  createdAt       DateTime @default(now()) // วันที่สร้างการจอง
  updatedAt       DateTime @updatedAt // วันที่อัปเดตการจองล่าสุด
}
